From 34f463f2602021b51e61d4d607dd0a36f7111b76 Mon Sep 17 00:00:00 2001
From: Dmitry Rozhkov <dmitry.rozhkov@jolla.com>
Date: Sun, 16 Feb 2014 18:01:43 +0200
Subject: [PATCH] Update zoom scale upon viewport change

---
 gfx/layers/ipc/AsyncPanZoomController.cpp | 1 +
 1 file changed, 1 insertion(+)

diff --git a/gfx/layers/ipc/AsyncPanZoomController.cpp b/gfx/layers/ipc/AsyncPanZoomController.cpp
index 2c34c7b..ae96345 100644
--- a/gfx/layers/ipc/AsyncPanZoomController.cpp
+++ b/gfx/layers/ipc/AsyncPanZoomController.cpp
@@ -1560,6 +1560,7 @@ void AsyncPanZoomController::NotifyLayersUpdated(const FrameMetrics& aLayerMetri
     if (mFrameMetrics.mViewport.width != aLayerMetrics.mViewport.width ||
         mFrameMetrics.mViewport.height != aLayerMetrics.mViewport.height) {
       needContentRepaint = true;
+      mFrameMetrics.mZoom.scale = aLayerMetrics.mZoom.scale;
     }
     mFrameMetrics.mViewport = aLayerMetrics.mViewport;
   }
-- 
1.9.0

